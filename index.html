<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mutuo - Calculadora de Hipoteca</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js"></script>
</head>
<body>
    <!-- Barra Superior -->
    <header class="top-bar">
        <div class="top-bar-content">
            <h1 class="app-name">Mutuo</h1>
            <p class="app-slogan">Ahorrar no es solo guardar, sino saber gastar</p>
        </div>
    </header>
    
    <!-- Barra de Navegación Superior -->
    <nav class="navbar">
        <ul class="nav-tabs">
            <li class="nav-tab active" data-tab="gastos-iniciales">Gastos Iniciales</li>
            <li class="nav-tab" data-tab="gastos-hipoteca">Gastos Hipotecarios</li>
            <li class="nav-tab" data-tab="cuota-hipotecaria">Cuota Hipotecaria</li>
            <li class="nav-tab" data-tab="costo-total">Costo Total de Vivienda</li>
            <li class="nav-tab" data-tab="simulaciones">Simulaciones Guardadas</li>
        </ul>
    </nav>
    
    <main>
        <!-- Sección 1: Gastos Iniciales -->
        <section class="section active" id="gastos-iniciales">
            <div class="section-container">
                <h2>Gastos Iniciales</h2>
                <form id="gastos-iniciales-form">
                    <!-- Nombre de la Simulación -->
                    <div class="form-group">
                        <label for="nombre-simulacion">Nombre de la Simulación</label>
                        <input type="text" id="nombre-simulacion" placeholder="Ingrese un nombre para la simulación" required>
                        <small class="description">Asigna un nombre único para identificar esta simulación.</small>
                    </div>
                    
                    <!-- Precio del Inmueble -->
                    <div class="form-group">
                        <label for="precio-inmueble">Precio del Inmueble (€)</label>
                        <input type="number" id="precio-inmueble" placeholder="Ingrese el precio del inmueble" min="0" step="0.01" required>
                        <small class="description">El valor total de la propiedad que deseas adquirir.</small>
                    </div>
                    
                    <!-- Entrada -->
                    <div class="form-group">
                        <label for="entrada-porcentaje">Entrada (%)</label>
                        <div class="input-with-calculation">
                            <input type="number" id="entrada-porcentaje" placeholder="Ingrese el porcentaje de entrada" min="0" max="100" step="0.01" required>
                            <span class="calculated-value">€<span id="entrada-euros">0.00</span></span>
                        </div>
                        <small class="description">Porcentaje del precio del inmueble que pagarás como adelanto.</small>
                    </div>
                    
                    <!-- Arras -->
                    <div class="form-group">
                        <label for="arras-porcentaje">Arras (%)</label>
                        <div class="input-with-calculation">
                            <input type="number" id="arras-porcentaje" placeholder="Ingrese el porcentaje de arras" min="0" max="100" step="0.01" required>
                            <span class="calculated-value">€<span id="arras-euros">0.00</span></span>
                        </div>
                        <small class="description">Cantidad que se entrega como garantía al firmar el contrato.</small>
                    </div>
                    
                    <!-- Tasación de Vivienda -->
                    <div class="form-group">
                        <label for="tasacion">Tasación de Vivienda (€)</label>
                        <input type="number" id="tasacion" placeholder="Ingrese el costo de tasación" min="0" step="0.01" required>
                        <small class="description">Costo del servicio profesional que determina el valor de la propiedad.</small>
                    </div>
                    
                    <!-- Notaría -->
                    <div class="form-group">
                        <label for="notaria">Notaría (€)</label>
                        <input type="number" id="notaria" placeholder="Ingrese el costo de notaría" min="0" step="0.01" required>
                        <small class="description">Honorarios del notario para la formalización de la escritura.</small>
                    </div>
                    
                    <!-- Gestoría -->
                    <div class="form-group">
                        <label for="gestoria">Gestoría (€)</label>
                        <input type="number" id="gestoria" placeholder="Ingrese el costo de gestoría" min="0" step="0.01" required>
                        <small class="description">Costos asociados a los trámites administrativos.</small>
                    </div>
                    
                    <!-- Registro de la Propiedad -->
                    <div class="form-group">
                        <label for="registro-propiedad">Registro de la Propiedad (€)</label>
                        <input type="number" id="registro-propiedad" placeholder="Ingrese el costo del registro" min="0" step="0.01" required>
                        <small class="description">Gastos para inscribir la propiedad a tu nombre.</small>
                    </div>
                    
                    <!-- ITP -->
                    <div class="form-group">
                        <label for="itp-porcentaje">ITP (%)</label>
                        <div class="input-with-calculation">
                            <input type="number" id="itp-porcentaje" placeholder="Ingrese el porcentaje de ITP" min="0" max="100" step="0.01" required>
                            <span class="calculated-value">€<span id="itp-euros">0.00</span></span>
                        </div>
                        <small class="description">Impuesto que grava la transmisión patrimonial de inmuebles.</small>
                    </div>
                    
                    <!-- Total Inicial -->
                    <div class="total-inicial">
                        <strong>Total Inicial Necesario (€):</strong> €<span id="total-inicial">0.00</span>
                    </div>
                </form>
            </div>
        </section>
        
        <!-- Sección 2: Gastos Relacionados con la Hipoteca -->
        <section class="section" id="gastos-hipoteca">
            <div class="section-container">
                <h2>Gastos Relacionados con la Hipoteca</h2>
                <form id="gastos-hipotecarios-form">
                    <!-- Seguro de hogar -->
                    <div class="form-group">
                        <label for="seguro-hogar">Seguro de Hogar (€)</label>
                        <input type="number" id="seguro-hogar" placeholder="Ingrese el costo del seguro de hogar" min="0" step="0.01" required>
                        <small class="description">Costo mensual del seguro que protege tu vivienda.</small>
                    </div>
                    
                    <!-- Seguro de vida -->
                    <div class="form-group">
                        <label for="seguro-vida">Seguro de Vida (€)</label>
                        <input type="number" id="seguro-vida" placeholder="Ingrese el costo del seguro de vida" min="0" step="0.01" required>
                        <small class="description">Costo mensual del seguro que garantiza el pago de la hipoteca en caso de fallecimiento.</small>
                    </div>
                    
                    <!-- TIN -->
                    <div class="form-group">
                        <label for="tin">TIN (%)</label>
                        <input type="number" id="tin" placeholder="Ingrese el TIN" min="0" step="0.01" required>
                        <small class="description">Tipo de Interés Nominal aplicado al préstamo.</small>
                    </div>
                    
                    <!-- TAE -->
                    <div class="form-group">
                        <label for="tae">TAE (%)</label>
                        <input type="number" id="tae" placeholder="Ingrese el TAE" min="0" step="0.01" required>
                        <small class="description">Tasa Anual Equivalente que incluye el interés y otros gastos.</small>
                    </div>
                    
                    <!-- Plazo del Préstamo -->
                    <div class="form-group">
                        <label for="plazo">Plazo del Préstamo (años)</label>
                        <input type="number" id="plazo" placeholder="Ingrese el plazo en años" min="1" step="1" required>
                        <small class="description">Duración del préstamo hipotecario en años.</small>
                    </div>
                </form>
            </div>
        </section>
        
        <!-- Sección 3: Cuota Hipotecaria -->
        <section class="section" id="cuota-hipotecaria">
            <div class="section-container">
                <h2>Cuota Hipotecaria</h2>
                <form id="cuota-hipotecaria-form">
                    <!-- Monto del Préstamo -->
                    <div class="form-group">
                        <label>Monto del Préstamo (€)</label>
                        <div class="input-with-calculation">
                            <span id="monto-prestamo">0.00</span>
                        </div>
                        <small class="description">Monto total del préstamo calculado como precio del inmueble menos entrada y arras.</small>
                    </div>
                    
                    <!-- Plazo del Préstamo -->
                    <div class="form-group">
                        <label>Plazo del Préstamo (años)</label>
                        <div class="input-with-calculation">
                            <span id="plazo-anios">0</span>
                        </div>
                        <small class="description">Duración del préstamo hipotecario en años.</small>
                    </div>
                    
                    <!-- Número de Cuotas -->
                    <div class="form-group">
                        <label>Número de Cuotas</label>
                        <div class="input-with-calculation">
                            <span id="numero-cuotas">0</span>
                        </div>
                        <small class="description">Total de pagos mensuales a realizar.</small>
                    </div>
                    
                    <!-- TIN -->
                    <div class="form-group">
                        <label>TIN (%)</label>
                        <div class="input-with-calculation">
                            <span id="mostrar-tin">0.00</span>
                        </div>
                        <small class="description">Tipo de Interés Nominal aplicado al préstamo.</small>
                    </div>
                    
                    <!-- TAE -->
                    <div class="form-group">
                        <label>TAE (%)</label>
                        <div class="input-with-calculation">
                            <span id="mostrar-tae">0.00</span>
                        </div>
                        <small class="description">Tasa Anual Equivalente que incluye el interés y otros gastos.</small>
                    </div>
                    
                    <!-- Cuota Mensual Basada en TIN -->
                    <div class="form-group">
                        <label>Cuota Mensual Basada en TIN (€)</label>
                        <div class="input-with-calculation">
                            <span id="cuota-tin">0.00</span>
                        </div>
                        <small class="description">Pago mensual calculado únicamente con el TIN.</small>
                    </div>
                    
                    <!-- Cuota Mensual Incluyendo Seguros -->
                    <div class="form-group">
                        <label>Cuota Mensual Incluyendo Seguros (€)</label>
                        <div class="input-with-calculation">
                            <span id="cuota-con-seguros">0.00</span>
                        </div>
                        <small class="description">Pago mensual que incluye los seguros de hogar y vida.</small>
                    </div>
                    
                    <!-- Costo Total de la Hipoteca Basado en TAE -->
                    <div class="form-group">
                        <label>Costo Total de la Hipoteca Basado en TAE (€)</label>
                        <div class="input-with-calculation">
                            <span id="costo-total-hipoteca">0.00</span>
                        </div>
                        <small class="description">Costo total del préstamo considerando el TAE.</small>
                    </div>
                    
                    <!-- Botones de Acción -->
                    <div class="button-group">
                        <button type="button" id="guardar-simulacion" class="btn guardar">Guardar Simulación</button>
                        <button type="button" id="nueva-simulacion" class="btn nueva">Nueva Simulación</button>
                    </div>
                </form>
            </div>
        </section>
        
        <!-- Sección 4: Costo Total de Vivienda -->
        <section class="section" id="costo-total">
            <div class="section-container">
                <h2>Costo Total de Vivienda</h2>
                <div class="costo-total-content">
                    <p><strong>Total Inicial Necesario (€):</strong> €<span id="total-inicial-costo">0.00</span></p>
                    <p><strong>Total Gastos Hipotecarios (€):</strong> €<span id="total-hipotecarios">0.00</span></p>
                    <p><strong>Costo Total de la Vivienda (€):</strong> €<span id="costo-total-vivienda">0.00</span></p>
                </div>
            </div>
        </section>
        
        <!-- Sección 5: Simulaciones Guardadas -->
        <section class="section" id="simulaciones">
            <div class="section-container">
                <h2>Simulaciones Guardadas</h2>
                <div id="lista-simulaciones">
                    <!-- Las simulaciones guardadas se listarán aquí -->
                </div>
            </div>
        </section>
    </main>
    
    <footer>
        <div class="footer-container">
            <p>&copy; 2024 Mutuo. Todos los derechos reservados.</p>
        </div>
    </footer>
    
    <!-- Firebase Initialization Script -->
    <script>
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyALraPSeUz2na5U39Id5xARwhBl0i287DM",
          authDomain: "mutuotest-7d923.firebaseapp.com",
          projectId: "mutuotest-7d923",
          storageBucket: "mutuotest-7d923.appspot.com",
          messagingSenderId: "606174907620",
          appId: "1:606174907620:web:1d64c186a7876b6c2a70f1",
          measurementId: "G-CGCDJLYMK8"
        };
        
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
    </script>
    
    <script src="script.js"></script>
</body>
</html>

